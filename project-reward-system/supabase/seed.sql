-- =====================================================
-- CO.UP 시드 데이터 (테스트/개발용)
-- Supabase에서 실행
-- =====================================================

-- 테스트용 조직 생성
INSERT INTO organizations (id, name, slug, plan, max_members) VALUES
  ('11111111-1111-1111-1111-111111111111', '씽크땡크', 'thinkthank', 'premium', 50);

-- 근로시간 설정 (조직당 1개)
INSERT INTO work_time_settings (org_id, work_minutes_per_day) VALUES
  ('11111111-1111-1111-1111-111111111111', 480);  -- 8시간

-- 팀 생성
INSERT INTO teams (id, org_id, name, sort_order) VALUES
  ('aaaa1111-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', '디자인팀', 1),
  ('aaaa1111-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111', '개발팀', 2),
  ('aaaa1111-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111', '기획팀', 3);

-- 직급 생성
INSERT INTO positions (id, org_id, name, level, sort_order) VALUES
  ('bbbb1111-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', '대표', 100, 1),
  ('bbbb1111-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111', '이사', 90, 2),
  ('bbbb1111-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111', '팀장', 80, 3),
  ('bbbb1111-0000-0000-0000-000000000004', '11111111-1111-1111-1111-111111111111', '과장', 70, 4),
  ('bbbb1111-0000-0000-0000-000000000005', '11111111-1111-1111-1111-111111111111', '대리', 60, 5),
  ('bbbb1111-0000-0000-0000-000000000006', '11111111-1111-1111-1111-111111111111', '사원', 50, 6);

-- 프로젝트 카테고리 생성
INSERT INTO project_categories (id, org_id, name, sort_order) VALUES
  ('cccc1111-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', '웹사이트', 1),
  ('cccc1111-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111', '앱개발', 2),
  ('cccc1111-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111', '브랜딩', 3),
  ('cccc1111-0000-0000-0000-000000000004', '11111111-1111-1111-1111-111111111111', '영상', 4),
  ('cccc1111-0000-0000-0000-000000000005', '11111111-1111-1111-1111-111111111111', '컨설팅', 5);

-- 멤버 생성 (auth_user_id는 실제 가입 시 연결)
INSERT INTO members (id, org_id, name, email, login_id, team_id, position_id, role, annual_salary, is_approved, is_active) VALUES
  -- 관리자
  ('dddd1111-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111',
   '김대표', 'ceo@thinkthank.kr', 'admin',
   NULL, 'bbbb1111-0000-0000-0000-000000000001', 'admin', 120000000, true, true),

  -- 디자인팀
  ('dddd1111-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111',
   '이디자인', 'design@thinkthank.kr', 'design_lead',
   'aaaa1111-0000-0000-0000-000000000001', 'bbbb1111-0000-0000-0000-000000000003', 'manager', 72000000, true, true),
  ('dddd1111-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111',
   '박시각', 'visual@thinkthank.kr', 'visual',
   'aaaa1111-0000-0000-0000-000000000001', 'bbbb1111-0000-0000-0000-000000000005', 'user', 48000000, true, true),

  -- 개발팀
  ('dddd1111-0000-0000-0000-000000000004', '11111111-1111-1111-1111-111111111111',
   '최개발', 'dev@thinkthank.kr', 'dev_lead',
   'aaaa1111-0000-0000-0000-000000000002', 'bbbb1111-0000-0000-0000-000000000003', 'manager', 84000000, true, true),
  ('dddd1111-0000-0000-0000-000000000005', '11111111-1111-1111-1111-111111111111',
   '정프론트', 'front@thinkthank.kr', 'frontend',
   'aaaa1111-0000-0000-0000-000000000002', 'bbbb1111-0000-0000-0000-000000000005', 'user', 54000000, true, true),
  ('dddd1111-0000-0000-0000-000000000006', '11111111-1111-1111-1111-111111111111',
   '강백엔드', 'back@thinkthank.kr', 'backend',
   'aaaa1111-0000-0000-0000-000000000002', 'bbbb1111-0000-0000-0000-000000000006', 'user', 48000000, true, true),

  -- 기획팀
  ('dddd1111-0000-0000-0000-000000000007', '11111111-1111-1111-1111-111111111111',
   '윤기획', 'plan@thinkthank.kr', 'plan_lead',
   'aaaa1111-0000-0000-0000-000000000003', 'bbbb1111-0000-0000-0000-000000000003', 'manager', 66000000, true, true);

-- 프로젝트 생성
INSERT INTO projects (id, org_id, name, category_id, team_id, status, start_date, end_date, contract_amount, direct_costs, margin_amount, confirmed, payment_stage, contact_name, contact_phone, memo) VALUES
  -- 진행중 프로젝트
  ('eeee1111-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111',
   'ABC 기업 리브랜딩', 'cccc1111-0000-0000-0000-000000000003', 'aaaa1111-0000-0000-0000-000000000001',
   'inprogress', '2024-11-01', '2024-12-31', 50000000, 5000000, 10000000, true, '선금', '홍길동', '010-1234-5678', 'CI/BI 전면 리뉴얼'),

  ('eeee1111-0000-0000-0000-000000000002', '11111111-1111-1111-1111-111111111111',
   'XYZ 쇼핑몰 구축', 'cccc1111-0000-0000-0000-000000000001', 'aaaa1111-0000-0000-0000-000000000002',
   'inprogress', '2024-10-15', '2025-01-31', 80000000, 10000000, 15000000, true, '중도금', '김담당', '010-9876-5432', 'Next.js + Supabase 기반'),

  -- 진행예정 프로젝트
  ('eeee1111-0000-0000-0000-000000000003', '11111111-1111-1111-1111-111111111111',
   'DEF 앱 개발', 'cccc1111-0000-0000-0000-000000000002', 'aaaa1111-0000-0000-0000-000000000002',
   'planning', '2025-01-01', '2025-04-30', 120000000, 20000000, 25000000, false, NULL, '박매니저', '010-1111-2222', 'React Native 크로스플랫폼'),

  -- 완료된 프로젝트
  ('eeee1111-0000-0000-0000-000000000004', '11111111-1111-1111-1111-111111111111',
   'GHI 홍보영상 제작', 'cccc1111-0000-0000-0000-000000000004', 'aaaa1111-0000-0000-0000-000000000001',
   'completed', '2024-09-01', '2024-10-15', 30000000, 8000000, 5000000, true, '완료', '이과장', '010-3333-4444', '3분 기업소개 영상');

-- 프로젝트 멤버 배분
INSERT INTO project_member_allocations (org_id, project_id, member_id, balance_percent, allocated_amount, planned_days) VALUES
  -- ABC 리브랜딩 (디자인팀)
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', 'dddd1111-0000-0000-0000-000000000002', 60.00, 30000000, 30),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', 'dddd1111-0000-0000-0000-000000000003', 40.00, 20000000, 25),

  -- XYZ 쇼핑몰 (개발팀)
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000004', 30.00, 24000000, 40),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000005', 40.00, 32000000, 50),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000006', 30.00, 24000000, 45);

-- 스케줄 (투입시간) - 2024년 11월 샘플
INSERT INTO schedules (org_id, project_id, member_id, date, minutes) VALUES
  -- ABC 리브랜딩 - 이디자인
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', 'dddd1111-0000-0000-0000-000000000002', '2024-11-01', 480),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', 'dddd1111-0000-0000-0000-000000000002', '2024-11-04', 360),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', 'dddd1111-0000-0000-0000-000000000002', '2024-11-05', 480),

  -- ABC 리브랜딩 - 박시각
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', 'dddd1111-0000-0000-0000-000000000003', '2024-11-01', 240),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', 'dddd1111-0000-0000-0000-000000000003', '2024-11-04', 480),

  -- XYZ 쇼핑몰 - 최개발
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000004', '2024-11-01', 480),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000004', '2024-11-04', 480),

  -- XYZ 쇼핑몰 - 정프론트
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000005', '2024-11-01', 480),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000005', '2024-11-04', 360),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000005', '2024-11-05', 480),

  -- XYZ 쇼핑몰 - 강백엔드
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000006', '2024-11-04', 480),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', 'dddd1111-0000-0000-0000-000000000006', '2024-11-05', 480);

-- 입금내역
INSERT INTO receipts (org_id, project_id, date, amount, memo) VALUES
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', '2024-11-01', 15000000, '선금 30%'),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', '2024-10-15', 24000000, '선금 30%'),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', '2024-11-15', 32000000, '중도금 40%'),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000004', '2024-09-01', 10000000, '선금'),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000004', '2024-10-20', 20000000, '잔금');

-- 지출내역
INSERT INTO expenses (org_id, project_id, date, amount, category, memo) VALUES
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000001', '2024-11-05', 2000000, '외주비', '일러스트 외주'),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000002', '2024-10-20', 5000000, '서버비', 'AWS 서버 비용'),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000004', '2024-09-15', 3000000, '장비', '촬영 장비 렌탈'),
  ('11111111-1111-1111-1111-111111111111', 'eeee1111-0000-0000-0000-000000000004', '2024-10-01', 5000000, '외주비', '편집 외주');

-- 운영비 (월별)
INSERT INTO opex (org_id, year_month, amount, memo) VALUES
  ('11111111-1111-1111-1111-111111111111', '2024-09', 15000000, '사무실 임대료, 공과금, 복리후생비 등'),
  ('11111111-1111-1111-1111-111111111111', '2024-10', 16000000, '사무실 임대료, 공과금, 복리후생비 등'),
  ('11111111-1111-1111-1111-111111111111', '2024-11', 15500000, '사무실 임대료, 공과금, 복리후생비 등');

-- 휴일 (2024년 공휴일 일부)
INSERT INTO holidays (org_id, date, name, type) VALUES
  ('11111111-1111-1111-1111-111111111111', '2024-12-25', '크리스마스', 'auto'),
  ('11111111-1111-1111-1111-111111111111', '2025-01-01', '신정', 'auto'),
  ('11111111-1111-1111-1111-111111111111', '2025-01-28', '설날 연휴', 'auto'),
  ('11111111-1111-1111-1111-111111111111', '2025-01-29', '설날', 'auto'),
  ('11111111-1111-1111-1111-111111111111', '2025-01-30', '설날 연휴', 'auto'),
  ('11111111-1111-1111-1111-111111111111', '2024-11-15', '회사 창립기념일', 'manual');
